<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack | 代码笔记</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="钮旭明的代码笔记">
    <link rel="preload" href="/note/assets/css/0.styles.801ee63d.css" as="style"><link rel="preload" href="/note/assets/js/app.a4e7d56a.js" as="script"><link rel="preload" href="/note/assets/js/2.9531d645.js" as="script"><link rel="preload" href="/note/assets/js/290.30e6c4d6.js" as="script"><link rel="prefetch" href="/note/assets/js/10.92d4c17f.js"><link rel="prefetch" href="/note/assets/js/100.0031a11a.js"><link rel="prefetch" href="/note/assets/js/101.503fb66b.js"><link rel="prefetch" href="/note/assets/js/102.af410445.js"><link rel="prefetch" href="/note/assets/js/103.17834597.js"><link rel="prefetch" href="/note/assets/js/104.37abd437.js"><link rel="prefetch" href="/note/assets/js/105.4e37093a.js"><link rel="prefetch" href="/note/assets/js/106.2cbbfb32.js"><link rel="prefetch" href="/note/assets/js/107.9a662cdd.js"><link rel="prefetch" href="/note/assets/js/108.984372e8.js"><link rel="prefetch" href="/note/assets/js/109.de05af16.js"><link rel="prefetch" href="/note/assets/js/11.250d1582.js"><link rel="prefetch" href="/note/assets/js/110.cd629cc6.js"><link rel="prefetch" href="/note/assets/js/111.245baa12.js"><link rel="prefetch" href="/note/assets/js/112.f832407e.js"><link rel="prefetch" href="/note/assets/js/113.ce73663a.js"><link rel="prefetch" href="/note/assets/js/114.e7879362.js"><link rel="prefetch" href="/note/assets/js/115.2e0a4fa3.js"><link rel="prefetch" href="/note/assets/js/116.9c9caad6.js"><link rel="prefetch" href="/note/assets/js/117.f9c5cc91.js"><link rel="prefetch" href="/note/assets/js/118.443f5cf5.js"><link rel="prefetch" href="/note/assets/js/119.42d58ae0.js"><link rel="prefetch" href="/note/assets/js/12.7788a484.js"><link rel="prefetch" href="/note/assets/js/120.8e9c9686.js"><link rel="prefetch" href="/note/assets/js/121.96be3a13.js"><link rel="prefetch" href="/note/assets/js/122.63b9cc83.js"><link rel="prefetch" href="/note/assets/js/123.fc32b0b1.js"><link rel="prefetch" href="/note/assets/js/124.dd6de6aa.js"><link rel="prefetch" href="/note/assets/js/125.363034b7.js"><link rel="prefetch" href="/note/assets/js/126.e5f6db8f.js"><link rel="prefetch" href="/note/assets/js/127.04d0e568.js"><link rel="prefetch" href="/note/assets/js/128.bb691742.js"><link rel="prefetch" href="/note/assets/js/129.e0556898.js"><link rel="prefetch" href="/note/assets/js/13.7ca90868.js"><link rel="prefetch" href="/note/assets/js/130.b55e6ffb.js"><link rel="prefetch" href="/note/assets/js/131.b176c30a.js"><link rel="prefetch" href="/note/assets/js/132.0603b8fb.js"><link rel="prefetch" href="/note/assets/js/133.f5adce1b.js"><link rel="prefetch" href="/note/assets/js/134.b663ba08.js"><link rel="prefetch" href="/note/assets/js/135.896fb0d8.js"><link rel="prefetch" href="/note/assets/js/136.1889aa08.js"><link rel="prefetch" href="/note/assets/js/137.e30705bc.js"><link rel="prefetch" href="/note/assets/js/138.28912867.js"><link rel="prefetch" href="/note/assets/js/139.7c631489.js"><link rel="prefetch" href="/note/assets/js/14.494f0206.js"><link rel="prefetch" href="/note/assets/js/140.9ddcedd9.js"><link rel="prefetch" href="/note/assets/js/141.c9c3c0f8.js"><link rel="prefetch" href="/note/assets/js/142.05576058.js"><link rel="prefetch" href="/note/assets/js/143.15f8ffd4.js"><link rel="prefetch" href="/note/assets/js/144.9e152789.js"><link rel="prefetch" href="/note/assets/js/145.11bfc7a8.js"><link rel="prefetch" href="/note/assets/js/146.649ee4bf.js"><link rel="prefetch" href="/note/assets/js/147.3ca236e6.js"><link rel="prefetch" href="/note/assets/js/148.c93df506.js"><link rel="prefetch" href="/note/assets/js/149.604f7979.js"><link rel="prefetch" href="/note/assets/js/15.e72f794c.js"><link rel="prefetch" href="/note/assets/js/150.9f6ee11e.js"><link rel="prefetch" href="/note/assets/js/151.7fa58762.js"><link rel="prefetch" href="/note/assets/js/152.def21a94.js"><link rel="prefetch" href="/note/assets/js/153.38d3d243.js"><link rel="prefetch" href="/note/assets/js/154.74b0ef78.js"><link rel="prefetch" href="/note/assets/js/155.952c9047.js"><link rel="prefetch" href="/note/assets/js/156.1cca5dba.js"><link rel="prefetch" href="/note/assets/js/157.da57ab97.js"><link rel="prefetch" href="/note/assets/js/158.1dd4e367.js"><link rel="prefetch" href="/note/assets/js/159.4a59e442.js"><link rel="prefetch" href="/note/assets/js/16.87befd0f.js"><link rel="prefetch" href="/note/assets/js/160.f6c119a4.js"><link rel="prefetch" href="/note/assets/js/161.43682ed7.js"><link rel="prefetch" href="/note/assets/js/162.0f707de7.js"><link rel="prefetch" href="/note/assets/js/163.29ed9e8a.js"><link rel="prefetch" href="/note/assets/js/164.c4bc1efc.js"><link rel="prefetch" href="/note/assets/js/165.2036cc7d.js"><link rel="prefetch" href="/note/assets/js/166.92d30a88.js"><link rel="prefetch" href="/note/assets/js/167.90da2636.js"><link rel="prefetch" href="/note/assets/js/168.76cf9738.js"><link rel="prefetch" href="/note/assets/js/169.49771bb9.js"><link rel="prefetch" href="/note/assets/js/17.585d6f71.js"><link rel="prefetch" href="/note/assets/js/170.b46ce449.js"><link rel="prefetch" href="/note/assets/js/171.33d22599.js"><link rel="prefetch" href="/note/assets/js/172.0b534731.js"><link rel="prefetch" href="/note/assets/js/173.5230d086.js"><link rel="prefetch" href="/note/assets/js/174.5b452ace.js"><link rel="prefetch" href="/note/assets/js/175.1ba18fcf.js"><link rel="prefetch" href="/note/assets/js/176.6c0df0a9.js"><link rel="prefetch" href="/note/assets/js/177.f14db854.js"><link rel="prefetch" href="/note/assets/js/178.72101dd6.js"><link rel="prefetch" href="/note/assets/js/179.379ecd20.js"><link rel="prefetch" href="/note/assets/js/18.b1cda4c6.js"><link rel="prefetch" href="/note/assets/js/180.a51b44e0.js"><link rel="prefetch" href="/note/assets/js/181.ab825173.js"><link rel="prefetch" href="/note/assets/js/182.41aef53f.js"><link rel="prefetch" href="/note/assets/js/183.0e672608.js"><link rel="prefetch" href="/note/assets/js/184.255141aa.js"><link rel="prefetch" href="/note/assets/js/185.b6f9fcea.js"><link rel="prefetch" href="/note/assets/js/186.b01d4dad.js"><link rel="prefetch" href="/note/assets/js/187.6ee64329.js"><link rel="prefetch" href="/note/assets/js/188.f8c0b4e9.js"><link rel="prefetch" href="/note/assets/js/189.9e167486.js"><link rel="prefetch" href="/note/assets/js/19.0eb04728.js"><link rel="prefetch" href="/note/assets/js/190.dd4a8a6c.js"><link rel="prefetch" href="/note/assets/js/191.834854c6.js"><link rel="prefetch" href="/note/assets/js/192.0bb10d91.js"><link rel="prefetch" href="/note/assets/js/193.60c9dff4.js"><link rel="prefetch" href="/note/assets/js/194.622bbd7c.js"><link rel="prefetch" href="/note/assets/js/195.82b44ff1.js"><link rel="prefetch" href="/note/assets/js/196.8ea0d887.js"><link rel="prefetch" href="/note/assets/js/197.5430faeb.js"><link rel="prefetch" href="/note/assets/js/198.c1544a15.js"><link rel="prefetch" href="/note/assets/js/199.5cca612d.js"><link rel="prefetch" href="/note/assets/js/20.31999078.js"><link rel="prefetch" href="/note/assets/js/200.55a82f45.js"><link rel="prefetch" href="/note/assets/js/201.bc673c06.js"><link rel="prefetch" href="/note/assets/js/202.545cec18.js"><link rel="prefetch" href="/note/assets/js/203.9d7107af.js"><link rel="prefetch" href="/note/assets/js/204.e31e1fcc.js"><link rel="prefetch" href="/note/assets/js/205.c16c84dd.js"><link rel="prefetch" href="/note/assets/js/206.2e396149.js"><link rel="prefetch" href="/note/assets/js/207.761008ed.js"><link rel="prefetch" href="/note/assets/js/208.9a36bbf9.js"><link rel="prefetch" href="/note/assets/js/209.85ad2d4c.js"><link rel="prefetch" href="/note/assets/js/21.f395c4fa.js"><link rel="prefetch" href="/note/assets/js/210.a5a83a38.js"><link rel="prefetch" href="/note/assets/js/211.e0c04d50.js"><link rel="prefetch" href="/note/assets/js/212.d7949643.js"><link rel="prefetch" href="/note/assets/js/213.2c41aeba.js"><link rel="prefetch" href="/note/assets/js/214.26f14c1b.js"><link rel="prefetch" href="/note/assets/js/215.14938149.js"><link rel="prefetch" href="/note/assets/js/216.db2aa23a.js"><link rel="prefetch" href="/note/assets/js/217.045e3794.js"><link rel="prefetch" href="/note/assets/js/218.61732742.js"><link rel="prefetch" href="/note/assets/js/219.6ad985cc.js"><link rel="prefetch" href="/note/assets/js/22.a0e8cabe.js"><link rel="prefetch" href="/note/assets/js/220.5610e222.js"><link rel="prefetch" href="/note/assets/js/221.477ce095.js"><link rel="prefetch" href="/note/assets/js/222.02ea9a94.js"><link rel="prefetch" href="/note/assets/js/223.caf47eed.js"><link rel="prefetch" href="/note/assets/js/224.f31b8730.js"><link rel="prefetch" href="/note/assets/js/225.f8b1845e.js"><link rel="prefetch" href="/note/assets/js/226.4d147c1a.js"><link rel="prefetch" href="/note/assets/js/227.4d0af7a9.js"><link rel="prefetch" href="/note/assets/js/228.d6f81d90.js"><link rel="prefetch" href="/note/assets/js/229.ec20f146.js"><link rel="prefetch" href="/note/assets/js/23.9cf76129.js"><link rel="prefetch" href="/note/assets/js/230.667a2b2c.js"><link rel="prefetch" href="/note/assets/js/231.6b26010d.js"><link rel="prefetch" href="/note/assets/js/232.6bbe3f56.js"><link rel="prefetch" href="/note/assets/js/233.3df9693b.js"><link rel="prefetch" href="/note/assets/js/234.807874d2.js"><link rel="prefetch" href="/note/assets/js/235.9dc238c8.js"><link rel="prefetch" href="/note/assets/js/236.852d4047.js"><link rel="prefetch" href="/note/assets/js/237.74b77406.js"><link rel="prefetch" href="/note/assets/js/238.f5b33e7e.js"><link rel="prefetch" href="/note/assets/js/239.8f086a59.js"><link rel="prefetch" href="/note/assets/js/24.5b1320bb.js"><link rel="prefetch" href="/note/assets/js/240.6a246434.js"><link rel="prefetch" href="/note/assets/js/241.ab6f3a49.js"><link rel="prefetch" href="/note/assets/js/242.64a7775e.js"><link rel="prefetch" href="/note/assets/js/243.82376098.js"><link rel="prefetch" href="/note/assets/js/244.9bd53837.js"><link rel="prefetch" href="/note/assets/js/245.fc1063a2.js"><link rel="prefetch" href="/note/assets/js/246.52cf41cb.js"><link rel="prefetch" href="/note/assets/js/247.311d2d8f.js"><link rel="prefetch" href="/note/assets/js/248.eeb83505.js"><link rel="prefetch" href="/note/assets/js/249.47ad0a78.js"><link rel="prefetch" href="/note/assets/js/25.2b5fd278.js"><link rel="prefetch" href="/note/assets/js/250.b49d373b.js"><link rel="prefetch" href="/note/assets/js/251.3576f6a7.js"><link rel="prefetch" href="/note/assets/js/252.1667f02d.js"><link rel="prefetch" href="/note/assets/js/253.07f4c192.js"><link rel="prefetch" href="/note/assets/js/254.9babba5a.js"><link rel="prefetch" href="/note/assets/js/255.ce8c1245.js"><link rel="prefetch" href="/note/assets/js/256.4afb49e3.js"><link rel="prefetch" href="/note/assets/js/257.736bb2b0.js"><link rel="prefetch" href="/note/assets/js/258.cf6db1af.js"><link rel="prefetch" href="/note/assets/js/259.caa28719.js"><link rel="prefetch" href="/note/assets/js/26.afd3627f.js"><link rel="prefetch" href="/note/assets/js/260.86e50f15.js"><link rel="prefetch" href="/note/assets/js/261.7b7ac3d8.js"><link rel="prefetch" href="/note/assets/js/262.d1b663e2.js"><link rel="prefetch" href="/note/assets/js/263.5a38d25d.js"><link rel="prefetch" href="/note/assets/js/264.854c6bb2.js"><link rel="prefetch" href="/note/assets/js/265.e5cda413.js"><link rel="prefetch" href="/note/assets/js/266.6b67ea6f.js"><link rel="prefetch" href="/note/assets/js/267.c486396b.js"><link rel="prefetch" href="/note/assets/js/268.43b22073.js"><link rel="prefetch" href="/note/assets/js/269.aee26007.js"><link rel="prefetch" href="/note/assets/js/27.8fbaaff4.js"><link rel="prefetch" href="/note/assets/js/270.03e35bdc.js"><link rel="prefetch" href="/note/assets/js/271.7a9c39e9.js"><link rel="prefetch" href="/note/assets/js/272.206d7027.js"><link rel="prefetch" href="/note/assets/js/273.53251bf6.js"><link rel="prefetch" href="/note/assets/js/274.f0b54d37.js"><link rel="prefetch" href="/note/assets/js/275.0c088db5.js"><link rel="prefetch" href="/note/assets/js/276.64f43e83.js"><link rel="prefetch" href="/note/assets/js/277.c59c36f5.js"><link rel="prefetch" href="/note/assets/js/278.ff7d7c9f.js"><link rel="prefetch" href="/note/assets/js/279.a7be0dde.js"><link rel="prefetch" href="/note/assets/js/28.90061d89.js"><link rel="prefetch" href="/note/assets/js/280.16217635.js"><link rel="prefetch" href="/note/assets/js/281.8971db66.js"><link rel="prefetch" href="/note/assets/js/282.fef27f8b.js"><link rel="prefetch" href="/note/assets/js/283.515caa6b.js"><link rel="prefetch" href="/note/assets/js/284.882dddd1.js"><link rel="prefetch" href="/note/assets/js/285.d3f8c72c.js"><link rel="prefetch" href="/note/assets/js/286.286d66d1.js"><link rel="prefetch" href="/note/assets/js/287.b1add86a.js"><link rel="prefetch" href="/note/assets/js/288.72c25af1.js"><link rel="prefetch" href="/note/assets/js/289.dcd2f67a.js"><link rel="prefetch" href="/note/assets/js/29.ba119a37.js"><link rel="prefetch" href="/note/assets/js/291.8a884282.js"><link rel="prefetch" href="/note/assets/js/292.093a328a.js"><link rel="prefetch" href="/note/assets/js/293.307b768d.js"><link rel="prefetch" href="/note/assets/js/294.f0e92eb2.js"><link rel="prefetch" href="/note/assets/js/295.f465b2e9.js"><link rel="prefetch" href="/note/assets/js/296.f059af99.js"><link rel="prefetch" href="/note/assets/js/297.cf92ff0c.js"><link rel="prefetch" href="/note/assets/js/298.c94d8a98.js"><link rel="prefetch" href="/note/assets/js/299.a15d5ff9.js"><link rel="prefetch" href="/note/assets/js/3.40a3a4bf.js"><link rel="prefetch" href="/note/assets/js/30.1d301a0e.js"><link rel="prefetch" href="/note/assets/js/300.fdb6cf0d.js"><link rel="prefetch" href="/note/assets/js/301.a37863e1.js"><link rel="prefetch" href="/note/assets/js/302.79597296.js"><link rel="prefetch" href="/note/assets/js/303.c3457608.js"><link rel="prefetch" href="/note/assets/js/304.544137de.js"><link rel="prefetch" href="/note/assets/js/31.6f72aab7.js"><link rel="prefetch" href="/note/assets/js/32.b7b72187.js"><link rel="prefetch" href="/note/assets/js/33.f15d3a3c.js"><link rel="prefetch" href="/note/assets/js/34.8bc7f6d0.js"><link rel="prefetch" href="/note/assets/js/35.9bc2b08d.js"><link rel="prefetch" href="/note/assets/js/36.f9303ae7.js"><link rel="prefetch" href="/note/assets/js/37.1bdb2667.js"><link rel="prefetch" href="/note/assets/js/38.5fe6397d.js"><link rel="prefetch" href="/note/assets/js/39.7fe7475a.js"><link rel="prefetch" href="/note/assets/js/4.6e7d7442.js"><link rel="prefetch" href="/note/assets/js/40.43149add.js"><link rel="prefetch" href="/note/assets/js/41.0e4492b2.js"><link rel="prefetch" href="/note/assets/js/42.61d2fdd0.js"><link rel="prefetch" href="/note/assets/js/43.65f16a2c.js"><link rel="prefetch" href="/note/assets/js/44.32e6ce82.js"><link rel="prefetch" href="/note/assets/js/45.4e333d8c.js"><link rel="prefetch" href="/note/assets/js/46.2a8e03ec.js"><link rel="prefetch" href="/note/assets/js/47.ee30dc44.js"><link rel="prefetch" href="/note/assets/js/48.f448924f.js"><link rel="prefetch" href="/note/assets/js/49.2000bf1c.js"><link rel="prefetch" href="/note/assets/js/5.40c64966.js"><link rel="prefetch" href="/note/assets/js/50.7b8bf505.js"><link rel="prefetch" href="/note/assets/js/51.1296d3c2.js"><link rel="prefetch" href="/note/assets/js/52.3795a433.js"><link rel="prefetch" href="/note/assets/js/53.3f8267ca.js"><link rel="prefetch" href="/note/assets/js/54.544f0b92.js"><link rel="prefetch" href="/note/assets/js/55.9dbda92c.js"><link rel="prefetch" href="/note/assets/js/56.fc7fd6c3.js"><link rel="prefetch" href="/note/assets/js/57.ae75a1b9.js"><link rel="prefetch" href="/note/assets/js/58.2567cd30.js"><link rel="prefetch" href="/note/assets/js/59.e0009a84.js"><link rel="prefetch" href="/note/assets/js/6.6bba5e89.js"><link rel="prefetch" href="/note/assets/js/60.a508af4a.js"><link rel="prefetch" href="/note/assets/js/61.bc2f03cc.js"><link rel="prefetch" href="/note/assets/js/62.3c63141e.js"><link rel="prefetch" href="/note/assets/js/63.947c9e49.js"><link rel="prefetch" href="/note/assets/js/64.c4117d12.js"><link rel="prefetch" href="/note/assets/js/65.6c42872b.js"><link rel="prefetch" href="/note/assets/js/66.25e6fec1.js"><link rel="prefetch" href="/note/assets/js/67.7c161f94.js"><link rel="prefetch" href="/note/assets/js/68.dea69109.js"><link rel="prefetch" href="/note/assets/js/69.244076e6.js"><link rel="prefetch" href="/note/assets/js/7.97f49113.js"><link rel="prefetch" href="/note/assets/js/70.03a377f8.js"><link rel="prefetch" href="/note/assets/js/71.b6eddb3e.js"><link rel="prefetch" href="/note/assets/js/72.1ef998ee.js"><link rel="prefetch" href="/note/assets/js/73.a745d152.js"><link rel="prefetch" href="/note/assets/js/74.a319348a.js"><link rel="prefetch" href="/note/assets/js/75.a12b8f15.js"><link rel="prefetch" href="/note/assets/js/76.fa323628.js"><link rel="prefetch" href="/note/assets/js/77.8a74cbe3.js"><link rel="prefetch" href="/note/assets/js/78.653008d0.js"><link rel="prefetch" href="/note/assets/js/79.c59506d1.js"><link rel="prefetch" href="/note/assets/js/8.3c3b6c30.js"><link rel="prefetch" href="/note/assets/js/80.8b2648fa.js"><link rel="prefetch" href="/note/assets/js/81.815edaa6.js"><link rel="prefetch" href="/note/assets/js/82.890fe4c0.js"><link rel="prefetch" href="/note/assets/js/83.3bb83de6.js"><link rel="prefetch" href="/note/assets/js/84.1277b425.js"><link rel="prefetch" href="/note/assets/js/85.4fa569fe.js"><link rel="prefetch" href="/note/assets/js/86.d856bd23.js"><link rel="prefetch" href="/note/assets/js/87.5410caa9.js"><link rel="prefetch" href="/note/assets/js/88.1b9d91bd.js"><link rel="prefetch" href="/note/assets/js/89.50894c1a.js"><link rel="prefetch" href="/note/assets/js/9.3a746d43.js"><link rel="prefetch" href="/note/assets/js/90.19e98569.js"><link rel="prefetch" href="/note/assets/js/91.b871fa55.js"><link rel="prefetch" href="/note/assets/js/92.055f5433.js"><link rel="prefetch" href="/note/assets/js/93.2e349b50.js"><link rel="prefetch" href="/note/assets/js/94.5d856275.js"><link rel="prefetch" href="/note/assets/js/95.fbcb5931.js"><link rel="prefetch" href="/note/assets/js/96.0485c48a.js"><link rel="prefetch" href="/note/assets/js/97.8824af57.js"><link rel="prefetch" href="/note/assets/js/98.5eb4a952.js"><link rel="prefetch" href="/note/assets/js/99.d69a6a2c.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.801ee63d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">代码笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/" class="nav-link">
  首页
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/" class="nav-link">
  首页
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/other/webpack.html#webpack-的构建流程" class="sidebar-link">webpack 的构建流程</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note/other/webpack.html#loader-和-plugin-的区别" class="sidebar-link">Loader 和 Plugin 的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/webpack.html#常见的-loader-以及作用" class="sidebar-link">常见的 loader 以及作用</a></li><li class="sidebar-sub-header"><a href="/note/other/webpack.html#常见的-plugin-以及作用" class="sidebar-link">常见的 plugin 以及作用</a></li></ul></li><li><a href="/note/other/webpack.html#import-和-commonjs-在-webpack-打包过程中有什么不同" class="sidebar-link">Import 和 CommonJs 在 webpack 打包过程中有什么不同</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note/other/webpack.html#打包文件-hash" class="sidebar-link">打包文件 hash</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note/other/webpack.html#使用-import-时，webpack-对-node-modules-里的依赖会做什么" class="sidebar-link">使用 import 时，webpack 对 node_modules 里的依赖会做什么</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/webpack.html#webpack-会对-node-modules-里的依赖做什么" class="sidebar-link">webpack 会对 node_modules 里的依赖做什么?</a></li></ul></li><li><a href="/note/other/webpack.html#tree-shaking-原理" class="sidebar-link">Tree-shaking 原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/webpack.html#关于副作用" class="sidebar-link">关于副作用</a></li></ul></li><li><a href="/note/other/webpack.html#webpack-runtime-和-manifest-代码的作用" class="sidebar-link">webpack Runtime 和 Manifest 代码的作用</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note/other/webpack.html#prerender-预渲染" class="sidebar-link">Prerender 预渲染</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note/other/webpack.html#优化-webpack-的打包体积" class="sidebar-link">优化 webpack 的打包体积</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note/other/webpack.html#webpack-和-gulp-的优缺点" class="sidebar-link">webpack 和 gulp 的优缺点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/webpack.html#glup-侧重于对开发流程的控制管理" class="sidebar-link">glup 侧重于对开发流程的控制管理</a></li><li class="sidebar-sub-header"><a href="/note/other/webpack.html#webpack-侧重于模块的打包" class="sidebar-link">webpack 侧重于模块的打包</a></li></ul></li><li><a href="/note/other/webpack.html#如何组织-css" class="sidebar-link">如何组织 css</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/note/other/webpack.html#webpack-热更新的原理" class="sidebar-link">webpack 热更新的原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/other/webpack.html#原理" class="sidebar-link">原理</a></li><li class="sidebar-sub-header"><a href="/note/other/webpack.html#hmr-原理详解" class="sidebar-link">HMR 原理详解</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h1> <h2 id="webpack-的构建流程"><a href="#webpack-的构建流程" class="header-anchor">#</a> webpack 的构建流程</h2> <p>webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程</p> <ul><li>初始化参数：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数</li> <li>开始编译：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译；</li> <li>确定入口：根据配置中的 entry 找出所有的入口文件；</li> <li>编译模块：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，在递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；</li> <li>完成模块编译：在经过第四步使用 loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系</li> <li>输出资源：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会；</li> <li>输出完成：再确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li></ul> <blockquote><p>在以上系统中，webpack 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 webpack 提供的 API 改变 webpack 的运行结果</p></blockquote> <h2 id="loader-和-plugin-的区别"><a href="#loader-和-plugin-的区别" class="header-anchor">#</a> Loader 和 Plugin 的区别</h2> <ol><li>作用不同：</li></ol> <ul><li>Loader 直译为&quot;加载器&quot;。Webpack 将一切文件视为模块，但是 webpack 原生是只能解析 js 文件，如果想将其他文件也打包的话，就会用到 loader。 所以 Loader 的作用是让 webpack 拥有了加载和解析非 JavaScript 文件的能力。</li> <li>Plugin 直译为&quot;插件&quot;。Plugin 可以扩展 webpack 的功能，让 webpack 具有更多的灵活性。 在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</li></ul> <ol start="2"><li>用法不同：</li></ol> <ul><li>Loader 在 module.rules 中配置，也就是说作为模块的解析规则而存在。类型为数组，每一项都是一个 Object，里面描述了对于什么类型的文件（test），使用什么加载(loader)和使用的参数（options）</li> <li>Plugin 在 plugins 中单独配置。 类型为数组，每一项是一个 plugin 的实例，参数都通过构造函数传入。</li></ul> <h3 id="常见的-loader-以及作用"><a href="#常见的-loader-以及作用" class="header-anchor">#</a> 常见的 loader 以及作用</h3> <ul><li>raw-loader：加载文件原始内容（utf-8）</li> <li>file-loader：把文件输出到一个文件夹中，在代码中通过相对 URL 去引用输出的文件</li> <li>url-loader:和 file-loader 类似，但是能在文件很小的情况下以 base64 的方式把文件内容注入到代码中</li> <li>source-map-loader:加载额外的 Source Map 文件，以方便断点调试</li> <li>svg-inline-loader：将压缩后的 SVG 内容注入代码中</li> <li>image-loader：加载并且压缩图片文件</li> <li>json-loader 加载 JSON 文件（默认包含）</li> <li>handlebars-loader: 将 Handlebars 模版编译成函数并返回</li> <li>babel-loader：把 ES6 转化成 ES5</li> <li>ts-loader: 将 TypeScript 转换成 JavaScript</li> <li>awesome-typescript-loader：将 TypeScript 转换成 JavaScript，性能优于 ts-loader</li> <li>css-loader：加载 css，支持模块化、压缩、文件导入等特性</li> <li>style-loader：把 css 代码注入到 js 中，通过 DOM 操作去加载 css</li> <li>eslint-loader：通过 ESLint 检查 JS 代码</li> <li>tslint-loader：通过 TSLint 检查 TypeScript 代码</li> <li>postcss-loader：扩展 CSS 语法，使用下一代 CSS，可以配合 autoprefixer 插件自动补齐 CSS3 前缀</li> <li>vue-loader：加载 Vue.js 单文件组件</li> <li>cache-loader: 可以在一些性能开销较大的 Loader 之前添加，目的是将结果缓存到磁盘里</li></ul> <h3 id="常见的-plugin-以及作用"><a href="#常见的-plugin-以及作用" class="header-anchor">#</a> 常见的 plugin 以及作用</h3> <ul><li>define-plugin：定义环境变量(Webpack4 之后指定 mode 会自动配置)</li> <li>ignore-plugin：忽略部分文件</li> <li>commons-chunk-plugin：提取公共代码</li> <li>html-webpack-plugin：简化 HTML 文件创建 (依赖于 html-loader)</li> <li>web-webpack-plugin：可方便地为单页应用输出 HTML，比 html-webpack-plugin 好用</li> <li>uglifyjs-webpack-plugin：不支持 ES6 压缩 (Webpack4 以前)</li> <li>terser-webpack-plugin: 支持压缩 ES6 (Webpack4)</li> <li>mini-css-extract-plugin: 分离样式文件，CSS 提取为独立文件，支持按需加载 (替代- extract-text-webpack-plugin)</li> <li>webpack-parallel-uglify-plugin: 多进程执行代码压缩，提升构建速度</li> <li>serviceworker-webpack-plugin：为网页应用增加离线缓存功能</li> <li>clean-webpack-plugin: 目录清理</li> <li>ModuleConcatenationPlugin: 开启 Scope Hoisting</li> <li>speed-measure-webpack-plugin: 可以看到每个 Loader 和 Plugin 执行耗时 (整个打包耗时、每个 Plugin 和 Loader 耗时)</li> <li>webpack-bundle-analyzer: 可视化 Webpack 输出文件的体积 (业务组件、依赖第三方模块)</li></ul> <h2 id="import-和-commonjs-在-webpack-打包过程中有什么不同"><a href="#import-和-commonjs-在-webpack-打包过程中有什么不同" class="header-anchor">#</a> Import 和 CommonJs 在 webpack 打包过程中有什么不同</h2> <ol><li>es6 模块调用 commonjs 模块: 可以直接使用 commonjs 模块，commonjs 模块将不会被 webpack 的模块系统编译而是原样输出，并且 commonjs 模块没有 default 属性</li> <li>es6 模块调用 es6 模块: 被调用的 es6 模块不会添加{esModule:true}，只有调用者才会添加{esModule:true}，并且可以进行 tree-shaking 操作，如果被调用的 es6 模块只是 import 进来，但是并没有被用到，那么被调用的 es6 模块将会被标记为/_ unused harmony default export _/，在压缩时此模块将被删除(如果被调用的 es6 模块里有立即执行语句，那么这些语句将会被保留)</li> <li>commonjs 模块引用 es6 模块: es6 模块编译后会添加{__esModule:true}。如果被调用的 es6 模块中恰好有 export default 语句，那么编译后的 es6 模块将会添加 default 属性</li> <li>commonjs 模块调用 commonjs 模块: commonjs 模块会原样输出</li></ol> <h2 id="打包文件-hash"><a href="#打包文件-hash" class="header-anchor">#</a> 打包文件 hash</h2> <ol><li>Hash 值: webpack 生态中存在多种计算 hash 的方式</li></ol> <ul><li>hash</li> <li>chunkhash</li> <li>contenthash</li></ul> <p>hash 代表每次 webpack 编译中生成的 hash 值，所有使用这种方式的文件 hash 都相同。每次构建都会使 webpack 计算新的 hash。 chunkhash 基于入口文件及其关联的 chunk 生成，某个文件的改动只会影响与它有关联的 chunk 的 hash 值，不会影响其他文件 contenthash 根据文件内容创建。当文件内容发生变化时，contenthash 发生变化</p> <ol start="2"><li>避免相同随机值</li></ol> <p>webpack 在计算 hash 后分割 chunk。产生相同随机值可能是因为这些文件属于同一个 chunk，可以将某一个文件提到独立的 chunk(如放入 entry)</p> <h2 id="使用-import-时，webpack-对-node-modules-里的依赖会做什么"><a href="#使用-import-时，webpack-对-node-modules-里的依赖会做什么" class="header-anchor">#</a> 使用 import 时，webpack 对 node_modules 里的依赖会做什么</h2> <p>ES6 Module: 不同于 CommonJS 和 AMD 的模块加载方法，ES6 在 JS 语言层面上实现了模块功能。它的设计思想是尽量的静态化，使得编译时就能确定模块的依赖关系。在遇到模块加载命令 import 时，不会去执行模块，而是只生成一个引用。等到真的需要用到的时候，再到模块里面去取值。这和 CommonJS 模块规范的最大不同。</p> <h3 id="webpack-会对-node-modules-里的依赖做什么"><a href="#webpack-会对-node-modules-里的依赖做什么" class="header-anchor">#</a> webpack 会对 node_modules 里的依赖做什么?</h3> <p>webpack 会根据定义的引入方式判断模块类型，再进行相关编译转化。当使用 import 引入时，babel 默认会把 ES6 的模块转化成 CommonJS 规范，然后会将 node_module 里的依赖打包成自执行函数的样式</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>(function(modules){
    //执行逻辑
})([模块数组])
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在模块数组中将模块传入，在函数体中经过一系列操作最终将模块通过 module.exports 导出</p> <h2 id="tree-shaking-原理"><a href="#tree-shaking-原理" class="header-anchor">#</a> Tree-shaking 原理</h2> <p>tree-shaking 是一种通过清除多余代码方式来优化项目打包体积的技术</p> <ul><li>利用 ES6 模块的特点</li> <li>只能作为模块顶层的语句出现</li> <li>import 的模块名只能是字符串常量，不能动态引入模块</li> <li>import 引入的模块不能再进行修改的 虽然 tree-shaking 的概念在 1990 年就提出来了，但是直到 ES6 的 ES6-style 模块出现后才真正被利用起来。这是因为 tree-shaking 只能在静态模块下工作。ES6 模块加载是静态的，因此在 ES6 种使用 tree-shaking 是非常容易地。而且，tree-shaking 不仅支持 import/export 级别，而且也支持声明级别</li></ul> <h3 id="关于副作用"><a href="#关于副作用" class="header-anchor">#</a> 关于副作用</h3> <p>副作用是指那些当 import 的时候会执行一些动作，但是不一定会有任何 export。比如 ployfill,ployfills 不对外暴露方法给主程序使用</p> <p>tree-shaking 不能自动识别哪些代码属于副作用，因此手动指定这些代码显得非常重要，如果不指定可能会出现一些意想不到的问题</p> <p>在 webpack 中，是通过 package.json 的 sideEffects 属性来实现的</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;name&quot;:&quot;tree-shaking&quot;,
&quot;sideEffects&quot;:false
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果所有的代码都不包含副作用，我们就可以简单地将该属性标记为 false 来告知 webpack，它可以安全地删除未用到的 export 导出。</p> <p>如果你的代码确实有一些副作用，那么可以改为提供一个数组：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&quot;name&quot;:&quot;tree-shaking&quot;,
&quot;sideEffects&quot;:[
  &quot;./src/public/polyfill.js&quot;
]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="webpack-runtime-和-manifest-代码的作用"><a href="#webpack-runtime-和-manifest-代码的作用" class="header-anchor">#</a> webpack Runtime 和 Manifest 代码的作用</h2> <p>主要是管理所有模块的交互。</p> <p><strong>Runtime</strong> 主要是指在浏览器运行时，webpack 用来连接模块化的应用程序的所有代码。runtime 包含：在模块交互时，连接模块所需的加载和解析逻辑。包括浏览器中的已加载模块的连接，以及懒加载模块的执行逻辑。</p> <p><strong>Manifest</strong>在代码经过编译打包之后，形成如 index.html 文件、一些 bundle 和各种资源加载到浏览器中，是不是 src 目录下的文件结构现在已经不存在了，那 webpack 如何管理所有模块之间的交互呢？这就是 manifest 数据的由来</p> <p>当编译器开始执行，解析和映射应用程序时，它会保留所有模块的详细要点。这个数据集合成为 manifest，当完成打包并发送到浏览器时，会在运行时通过 manifest 来解析加载模块。无论选择哪种模块语法，那些 import 或 require 语句都已经转化为<strong>webpack_require</strong>方法，此方法指向模块标识符。通过使用 manifest 中的数据，runtime 将能够查询模块标识符，检索背后对应的模块。</p> <p>总结</p> <ul><li>runtime：根据 manifest 数据管理模块代码。主要是指模块交互时，连接模块所需的加载和解析逻辑。包括：已经加载到浏览器中的连接模块逻辑，以及尚未加载模块的延迟加载逻辑</li> <li>manifest：记录在打包过程中，各个模块之间的信息以及关联关系。</li></ul> <h2 id="prerender-预渲染"><a href="#prerender-预渲染" class="header-anchor">#</a> Prerender 预渲染</h2> <p>在 webpack 打包结束并生成文件后(after-emit hook),会启动一个 server 模拟网站的运行，用 puppeteer(google 官方的 headless 无头浏览器)访问指定的页面 route，得到相应的 html 结构，并将结果输出指定目录，过程类似爬虫。</p> <p>即利用打包工具对应用进行预先渲染，让用户在首次获取到 html 文件的时候就已经能看到我们的内容，接着等待 Bundle 下载解析完成之后再进行接管。</p> <p>打包构建预渲染的核心原理又是什么呢?其实这里就要用到无头浏览器来帮助实现这项功能，他会在本地启动一个无头浏览器，并访问我们配置好的路由，接着将渲染好的页面 html 内容输出到我们的 html 文件中，并建立相关的目录</p> <p>一般常用的无头 比如:phantomjs、puppeteer,对于 prerender-spa-plugin 插件来说，它内部就是采用了 phantomjs 作为无头浏览器进行预渲染。</p> <p>应用场景</p> <ul><li>seo 优化:对于一些动态数据利用 renderAfterTime 也可以进行预渲染出来。当动态数据渲染出来之后，客户端代码比如 bundle.js 会马上接管 dom 操作，对于 spa 优化有便捷性</li> <li>骨架屏:把骨架屏当做预渲染页面，当 ajax 获取到数据之后再把骨架屏替换掉;prerender-spa-plugin 提供了 postProcessHtml 钩子</li></ul> <p>预渲染不适用经常变化的数据，比如说股票代码网站，天气预报网站。因为此时的数据是动态的，而预渲染时已经生成好了 dom 节点。如果要兼容 seo 可以使用 SSR。预渲染不适用大量的路由页面，比如成千上百个路由，此时打包后预渲染将会非常慢。预渲染最好的应用场景是需要 seo 的活动页面</p> <p>优点</p> <ul><li>seo:对于搜索引擎爬虫来说(先排除高级爬虫)，它不会等待你的 JS 执行完成之后才进行抓取，如果不进行预渲染，对于客户端渲染应用来说，HTML 文件中几乎没有什么内容，故会影响你的搜索排名。采用预渲染就能保证在首次加载就能获取到相关的 html 内容，利用 seo</li> <li>弱网环境：对于网络条件比较差的用户来说，你的 bundle 文件过大，会导致页面长时间白屏，这将使你白白流失很多用户，所以首次内容的快速呈现也是很重要的，解决白屏问题。</li></ul> <h2 id="优化-webpack-的打包体积"><a href="#优化-webpack-的打包体积" class="header-anchor">#</a> 优化 webpack 的打包体积</h2> <ul><li>压缩代码</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>webpack-paralle-uglify-plugin

uglifyjs-webpack-plugin 开启parallel参数(不支持ES6)

terser-webpack-plugin 开启paraller参数

多进程并行压缩

通过 mini-css-extract-plugin 提取Chunk中的CSS代码到单独文件，通过 optimize-css-assets-webpack-plugin 插件，开启cssnano 压缩css
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>提取页面公共资源</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>使用 html-webpack-externals-plugin，将基础包通过CDN引入，不打入bundle中

使用SplitChunksPlugin进行(公共脚本、基础包、页面公共文件)分离(webpack4内置)，替代了 CommonsChunkPlugin 插件

基础包分离：将一些基础库放到cdn，比如vue、webpack配置 external 是vue的不打入bundle
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>Tree shaking</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>purgecss-webpack-plugin 和 mini-css-extract-plugin 配合使用(仅仅是建议)

打包过程中检测工程中没有引用过的模块并进行标记，在资源压缩时将它们从最终的bundle中去掉(只能对ES6 Module生效)开发中尽可能使用 ES6 Module 的模块，提高tree shaking的效率

禁用babel-loader的模块依赖解析，否则 webpack 接收到的就是转换过的commonJS形式的模块，无法进行tree shaking

使用 PurifyCSS(不在维护)或者uncss去除无用css代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>Scope hoisting</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>构建后的代码会存在大量闭包，造成体积增大，运行代码时创建的函数作用域变多，内存开销变大。Scope hoisting 将所有模块的代码按照引用顺序放在一个函数作用域里，然后适当的重命名一些变量以防止变量名冲突

必须是ES6的语法，因为有很多第三方库仍采用CommonJS 语法，为了充分发挥Scope hoisting 的作用，需要配置 mainFields 对第三方模块优先采用 jsnext:main 中指向的ES6模块化语法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>图片压缩</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>使用基于node库的imagemin(很多定制选项、可以处理多种图片格式)

配置 image-webpack-loader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>动态 Ployfill</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>建议采用 polyfill-service 只给用户返回需要的polyfill，社区维护。

@babel-preset-env中通过useBuiltIns:&quot;usage&quot; 参数来动态加载polyfill
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>借助工具分析性能瓶颈</li></ul> <p>speed-measure-webpack-plugin，简称 SMP，分析出 webpack 打包过程中 Loader 和 Plugin 的耗时时，有助于找到构建过程中的性能瓶颈。</p> <h2 id="webpack-和-gulp-的优缺点"><a href="#webpack-和-gulp-的优缺点" class="header-anchor">#</a> webpack 和 gulp 的优缺点</h2> <p>两者同属于构建工具，但是侧重点不同</p> <h3 id="glup-侧重于对开发流程的控制管理"><a href="#glup-侧重于对开发流程的控制管理" class="header-anchor">#</a> glup 侧重于对开发流程的控制管理</h3> <p>优点：</p> <ul><li>轻量，配置文件比较简单</li> <li>基于 nodeJS 强大的 stream 能力，构建速度快</li> <li>适合多页 web 应用以及 node 服务端应用</li></ul> <p>缺点：不太适合单页或自定义模块的开发</p> <h3 id="webpack-侧重于模块的打包"><a href="#webpack-侧重于模块的打包" class="header-anchor">#</a> webpack 侧重于模块的打包</h3> <p>优点：</p> <ul><li>任何资源都可以作为模块处理</li> <li>社区资源丰富，有很多插件和 loader</li></ul> <p>缺点：</p> <ul><li>配置复杂</li> <li>不适合 node 服务端应用</li> <li>构建速度较慢，需要做很多性能优化</li></ul> <h2 id="如何组织-css"><a href="#如何组织-css" class="header-anchor">#</a> 如何组织 css</h2> <p>webpack 中处理 css，css-loader、style-loader 是必不可少的</p> <ul><li>cssModule css-loader 中配置 module 可以开启模块化，防止类名污染，实现 css 局域化 缺点：生成的 className 语义化降低</li> <li>postCss 兼容性强以及写法前置，集成了 css-next 以及 autoprefix、css in js、css module 等众多特点，可选配置，人性化</li> <li>less\sass\stylus css 预处理器 增加变成的特性，无需考虑兼容的问题，可以使用变量、函数等，不过 postCss 都支持。</li></ul> <h2 id="webpack-热更新的原理"><a href="#webpack-热更新的原理" class="header-anchor">#</a> webpack 热更新的原理</h2> <p>基础概念</p> <ol><li>webpack compiler：将 js 编译成 Bundle</li> <li>Bundle Server：提供文件在浏览器的访问，实际上就是一个服务器</li> <li>HMR Server：将热更新的文件输出给 HMR Runtime</li> <li>HMR Runtime：会注入到 bundle.js 中，与 HRM Server 通过 webSocket 链接，接收文件变化，并更新对应文件</li> <li>bundle.js：构建输出的文件</li></ol> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <p>1.启动阶段</p> <ul><li><p>webpack Compiler 将对应文件打包成 bundle.js(包含注入的 HMR Server)，发送给 Bundler Server</p></li> <li><p>浏览器即可访问服务器的方式去获取 bundle.js</p> <p>2.更新阶段(文件发生变化)</p></li> <li><p>webpack compiler 重新编译，发送给 HMR Server</p></li> <li><p>HMR Server 可以知道有哪些资源、哪些模块发生了变化，通知 HRM Runtime</p></li> <li><p>HRM Runtime 更新代码</p></li></ul> <h3 id="hmr-原理详解"><a href="#hmr-原理详解" class="header-anchor">#</a> HMR 原理详解</h3> <p>使用 webpack-dev-server 去启动本地服务，内部实现使用了 webpack、express、websocket</p> <ul><li>使用 express 启动本地服务，当浏览器访问资源时对此响应</li> <li>服务端和客户端使用 websocket 实现长连接</li> <li>webpack 监听源文件的变化，即当开发者保存文件时触发 webpack 的重新编译
<ul><li>每次编译都会生成 hash 值，已改动模块的 json 文件、已改动模块代码的 js 文件</li> <li>编译完成后通过 socket 向客户端推送当前编译的 hash 戳</li></ul></li> <li>客户端的 websocket 监听到有文件改动推送过来的 hash 戳，会和上一次对比
<ul><li>一致就走缓存</li> <li>不一致就通过 ajax 和 jsonp 向服务端获取最新资源</li></ul></li> <li>使用内存文件系统去替换有修改的内容实现局部刷新</li></ul> <ol><li>server 端</li></ol> <ul><li>启动 webpack-dev-server 服务器</li> <li>创建 webpack 实例</li> <li>创建 server 服务器</li> <li>添加 webpack 的 done 事件回调</li> <li>编译完成向客户端发送消息</li> <li>创建 express 应用 app</li> <li>设置文件系统为内存文件系统</li> <li>添加 webpack-dev-middleware 中间件</li> <li>中间件负责返回生成的文件</li> <li>启动 webpack 编译</li> <li>创建 http 服务器并启动服务</li> <li>使用 sockjs 在浏览器端和服务端之间建立一个 websocket 长连接</li> <li>创建 socket 服务器</li></ul> <ol start="2"><li>client 端</li></ol> <ul><li>webpack-dev-server/client 端会监听到此 hash 消息</li> <li>客户端收到 ok 消息后会执行 reloadApp 方法进行更新</li> <li>在 reloadApp 中会进行判断，是否支持热更新，如果支持的话发生 webpackHotUpdate 事件，如果不支持就- 直接刷新浏览器</li> <li>在 webpack/hot/dev-server.js 会监听 webpackHotUpdate 事件</li> <li>在 check 方法里会调用 module.hot.check 方法</li> <li>HotModuleReplacement.runtime 请求 Manifest</li> <li>通过调用 JsonpMainTemplate.runtime 的 hotDownloadManifest 方法</li> <li>调用 JsonpMainTemplate.runtime 的 hotDownloadUpdateChunk 方法通过 JSONP 请求获取最新的模块代码</li> <li>补丁 js 取回来或会调用 JsonpMainTemplate.runtime.js 的 webpackHotUpdate 方法</li> <li>然后会调用 HotModuleReplacement.runtime.js 的 hotAddUpdateChunk 方法动态更新模块代码</li> <li>然后调用 hotApply 方法进行热更新</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.a4e7d56a.js" defer></script><script src="/note/assets/js/2.9531d645.js" defer></script><script src="/note/assets/js/290.30e6c4d6.js" defer></script>
  </body>
</html>
